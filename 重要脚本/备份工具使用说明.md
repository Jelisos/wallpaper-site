# 🗂️ 重要数据一键备份工具使用说明

## 📋 工具概述

本备份工具提供了三种不同的备份方式，用于快速备份XAMPP项目中的重要数据文件和文件夹。

### 📦 备份内容

- **📄 list.json** - 壁纸列表数据文件
- **🖼️ wallpapers文件夹** - 壁纸图片资源目录
- **👤 avatar文件夹** - 用户头像资源目录  
- **🗃️ wallpapers_import.sql** - 数据库导入文件

## 🛠️ 工具文件说明

### 1. `一键备份.bat` (推荐)
**最简单的使用方式**
- 📁 **位置**: `f:\XAMPP\htdocs\重要脚本\一键备份.bat`
- 🎯 **用途**: 双击即可运行，自动调用PowerShell脚本
- ✨ **特点**: 无需任何配置，开箱即用

### 2. `backup_script.ps1`
**PowerShell版本备份脚本**
- 📁 **位置**: `f:\XAMPP\htdocs\重要脚本\backup_script.ps1`
- 🎯 **用途**: 命令行备份工具，支持参数配置
- ✨ **特点**: 功能完整，支持自定义输出路径

### 3. `backup_important_data.html`
**网页版备份工具**
- 📁 **位置**: `f:\XAMPP\htdocs\重要脚本\backup_important_data.html`
- 🎯 **用途**: 在浏览器中运行的备份工具
- ✨ **特点**: 可视化界面，实时进度显示

## 🚀 使用方法

### 方法一：批处理文件（推荐）

1. **双击运行** `一键备份.bat`
2. **确认备份** 在弹出的命令行窗口中输入 `Y` 确认开始备份
3. **等待完成** 脚本会自动备份所有重要数据并生成压缩包
4. **查看结果** 备份完成后会自动打开包含备份文件的文件夹

### 方法二：PowerShell脚本

#### 基本使用
```powershell
# 在PowerShell中运行
.\backup_script.ps1
```

#### 高级使用
```powershell
# 指定输出路径
.\backup_script.ps1 -OutputPath "D:\Backups"

# 启用详细输出
.\backup_script.ps1 -Verbose
```

### 方法三：网页版工具

1. **打开浏览器** 访问 `http://localhost/重要脚本/backup_important_data.html`
2. **查看备份清单** 确认要备份的文件和文件夹
3. **点击开始备份** 点击"🚀 开始备份"按钮
4. **选择文件夹** 根据提示选择wallpapers和avatar文件夹
5. **下载备份** 备份完成后会自动下载压缩包

## 📊 备份文件格式

### 文件命名规则
```
重要数据备份_YYYYMMDD_HHMMSS.zip
```

**示例**: `重要数据备份_20241215_143022.zip`

### 压缩包结构
```
重要数据备份_20241215_143022.zip
├── list.json                    # 壁纸列表数据
├── wallpapers_import.sql        # 数据库导入文件
├── wallpapers/                  # 壁纸图片文件夹
│   ├── 图片1.jpeg
│   ├── 图片2.jpeg
│   └── ...
└── avatar/                      # 用户头像文件夹
    ├── avatar_1_xxx.png
    ├── avatar_2_xxx.png
    └── ...
```

## ⚠️ 注意事项

### 系统要求
- **操作系统**: Windows 10/11
- **PowerShell**: 5.0 或更高版本
- **浏览器**: Chrome/Firefox/Edge (用于网页版)
- **.NET Framework**: 4.5 或更高版本

### 权限要求
- 确保对XAMPP目录有**读取权限**
- 确保对输出目录有**写入权限**
- PowerShell执行策略允许运行脚本

### 文件大小限制
- 网页版工具受浏览器内存限制，大文件夹可能导致性能问题
- PowerShell版本无文件大小限制
- 建议定期清理不需要的壁纸文件以减小备份体积

## 🔧 故障排除

### 常见问题

#### 1. PowerShell执行策略错误
**错误信息**: `无法加载文件，因为在此系统上禁止运行脚本`

**解决方案**:
```powershell
# 以管理员身份运行PowerShell，执行以下命令
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

#### 2. 路径不存在错误
**错误信息**: `路径不存在: ../static/data/list.json`

**解决方案**:
- 确保在正确的目录下运行脚本
- 检查备份路径是否正确
- 确认要备份的文件确实存在

#### 3. 权限不足错误
**错误信息**: `拒绝访问路径`

**解决方案**:
- 以管理员身份运行脚本
- 检查文件和文件夹的权限设置
- 确保没有其他程序正在使用要备份的文件

#### 4. 网页版文件夹选择失败
**问题**: 无法选择文件夹或选择后没有反应

**解决方案**:
- 使用现代浏览器（Chrome、Firefox、Edge）
- 确保浏览器支持文件API
- 尝试刷新页面后重新操作

## 📝 自定义配置

### 添加新的备份项目

编辑 `backup_script.ps1` 文件，在 `$BackupPaths` 数组中添加新项目：

```powershell
$BackupPaths = @(
    # 现有项目...
    @{
        Name = "新文件名"
        Path = "相对路径\到\文件或文件夹"
        Type = "File"  # 或 "Folder"
    }
)
```

### 修改输出路径

默认输出到当前目录，可以通过参数指定：
```powershell
.\backup_script.ps1 -OutputPath "D:\MyBackups"
```

## 📞 技术支持

如果遇到问题，请检查：
1. **系统要求** 是否满足
2. **文件路径** 是否正确
3. **权限设置** 是否充足
4. **错误日志** 中的详细信息

---

**维护信息**:
- 📅 创建日期: 2024-12-15
- 📁 文件位置: `f:\XAMPP\htdocs\重要脚本\备份工具使用说明.md`
- 🔄 更新记录: 初始版本

**备注**: 如需添加新的备份项目，请修改相应脚本中的配置数组，并更新本说明文档。